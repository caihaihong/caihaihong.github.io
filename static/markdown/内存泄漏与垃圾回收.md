### 内存泄漏与垃圾回收

#### 什么是内存泄漏（Memory Leak）？

程序的运行需要内存，程序运行可以申请内存，系统也会提供内存。当程序没有及时释放不再使用的内存时，就会造成内存占用越来越高，影响系统的性能。

```
let arr = [1,2];
```
如果arr所引用的数组，没有使用了，就应该这样处理释放资源。

```
arr = null;
```



#### 什么是垃圾回收机制（Garbage Collector）？

有些语言，例如C语言，需要手动申请，释放内存。而大部分语言提供自动内存管理，这个叫做垃圾回收机制。

#### 两种常见垃圾回收机制方法

##### 引用计数法（Reference Counting）

语言引擎有一张计数表，保存了内存里面所有资源的引用次数，如果一个值的引用次数为0，这个值占用的内存资源也就可以回收释放了。

![image](https://github.com/caihaihong/caihaihong.github.io/blob/master/imgs/broswer/77.png?raw=true) 


##### 标记-清除算法（Mark-Sweep）

标记、清除。


##### 常见内存泄漏场景

1. 数据缓存
2. 闭包
3. 没必要全局变量
4. 无效的DOM引用，元素已被移除，没有提前解除引用。
5. 定时器未清除。